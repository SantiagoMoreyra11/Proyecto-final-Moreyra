<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="@sweetalert2/theme-bootstrap-4/bootstrap-4.css"
    />
    <link rel="shortcut icon" href="../img/logo.png" type="image/x-icon" />
    <link rel="stylesheet" href="../css/style.css" />
    <title>Armory</title>
  </head>
  <body>
    <header>
      <section>
        <nav class="navbar navbar-expand-xl navbar-dark">
          <div class="container-fluid">
            <section id="logo">
              <div class="h3">
                <a class="text-white text-decoration-none" href="../index.html"
                  ><img
                    src="../img/logo.png"
                    alt="logo"
                    width="80"
                    height="50"
                  />Armory</a
                >
              </div>
            </section>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarDark"
              aria-controls="navbarDark"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse show color" id="navbarDark">
              <ul class="navbar-nav me-auto mb-2 mb-xl-0">
                <li class="nav-item">
                  <a class="nav-link" href="../index.html">Inicio</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link " href="../pages/contacto.html"
                    >Contacto</a
                  >
                  <li class="nav-item">
                    <a class="nav-link active" href="../pages/producto.html">Productos</a>
                  </li>
                </li>
                <li class="nav-item">
                  <button id="dark-mode-toggle">Modo Oscuro</button>
                </li>
              </ul>
              <form class="d-flex">
                <input
                  class="form-control me-3"
                  type="search"
                  placeholder="buscar"
                  aria-label="Search"
                />
                <button class="btn btn-outline-light" type="submit">
                  buscar
                </button>
              </form>
            </div>
          </div>
        </nav>
      </section>
    </header>
    <main>
      <script>
        document.addEventListener("DOMContentLoaded", () => {
          const baseDeDatos = [
            {
              id: 1,
              nombre: "Creatina XXL pure",
              categoria: "Suplemento",
              precio: 49.99,
              marca: "XXL",
              imagen: "../img/creatina1.jpg",
              descripcion:
                "Ideal para prevenir fatiga muscular, aumento muscular y mejorar el rendimiento.",
            },
            {
              id: 2,
              nombre: "Protein Star Nutrition",
              categoria: "Suplemento",
              precio: 49.99,
              marca: "Star Nutrition",
              imagen: "../img/creatina2.jpg",
              descripcion:
                "Envase de 300 gramos. Ideal para cualquier tipo de deportes. Masa muscular. Recuperación.",
            },
            {
              id: 3,
              nombre: "TrueMade Whey Protein",
              categoria: "Suplemento",
              precio: 29.99,
              marca: "Ena",
              imagen: "../img/creatina3.jpg",
              descripcion:
                "Whey Protein Isolate (WPI) es la forma más pura de proteína de suero que existe actualmente.",
            },
            {
              id: 4,
              nombre: "Bcaa 6000 de Nutrex ",
              categoria: "Suplemento",
              precio: 9.99,
              marca: "Ena",
              imagen: "../img/creatina4.jpg",
              descripcion:
                "Aminos BCAA de Nutrex. Importados. Masa muscular. Rendimiento. Previene fatiga.",
            },
            {
              id: 5,
              nombre: "Vaso Shakers",
              categoria: "Accesorio",
              precio: 25.99,
              marca: " Shark Design",
              imagen: "../img/creatina6.jpg",
              descripcion:
                "Vaso mezclador de Game of Thrones. Semi transparente. Con tapa a rosca y pico a presión.",
            },
            {
              id: 6,
              nombre: " BCAA Xtrenght Nutrition",
              categoria: "Suplemento",
              precio: 32.99,
              marca: "Xtrenght Nutrition",
              imagen: "../img/creatina5.jpg",
              descripcion:
                "Aminoácido en polvo de rápida asimilación Con Beta Alanina, previene la fatiga muscular..",
            },
            {
              id: 7,
              nombre: "Quemador de grasa",
              categoria: "Suplemento",
              precio: 10.99,
              marca: "Universal Nutrition",
              imagen: "../img/creatina7.jpg",
              descripcion:
                "Quemador de grasas importado de USA  Aprobado en Argentina",
            },
            {
              id: 8,
              nombre: "Carbo Energy  Ena Sport",
              categoria: "Suplemento",
              precio: 49.99,
              marca: "Ena",
              imagen: "../img/creatina8.jpg",
              descripcion:
                "Carbohidratos. Ideal para recuperación. Rendimiento. Aumento de energía. Sin Tacc.",
            },
            {
              id: 9,
              nombre: "Ganador de peso 2 kg ",
              categoria: "Suplemento",
              precio: 29.99,
              marca: "XXL",
              imagen: "../img/creatina9.jpg",
              descripcion:
                "Uno de los mejores ganadores de peso que existe en el mercado, que llego a Argentina.",
            },
            {
              id: 10,
              nombre: " NitroGain 5 kg Big Size",
              categoria: "Suplemento",
              precio: 259.99,
              marca: "Xtrenght Nutrition ",
              imagen: "../img/creatina10.jpg",
              descripcion:
                "Activa el anabolismo real para los músculos más grandes, más fuertes y más recistentes.",
            },
            {
              id: 11,
              nombre: "Creatina  XXL pure ",
              categoria: "Suplemento",
              precio: 49.99,
              marca: "XXL",
              imagen: "../img/creatina1.jpg",
              descripcion:
                "Ideal para prevenir fatiga muscular, aumento muscular y mejorar el rendimiento.",
            },
            {
              id: 12,
              nombre: "Protein Star Nutrition",
              categoria: "Suplemento",
              precio: 49.99,
              marca: "Star Nutrition",
              imagen: "../img/creatina2.jpg",
              descripcion:
                "Envase de 300 gramos. Ideal para cualquier tipo de deportes. Masa muscular. Recuperación.",
            },
            {
              id: 13,
              nombre: "TrueMade Whey Protein",
              categoria: "Suplemento",
              precio: 29.99,
              marca: "Ena",
              imagen: "../img/creatina3.jpg",
              descripcion:
                "Whey Protein Isolate (WPI) es la forma más pura de proteína de suero que existe actualmente.",
            },
            {
              id: 14,
              nombre: "Bcaa 6000 de Nutrex ",
              categoria: "Suplemento",
              precio: 9.99,
              marca: "Ena",
              imagen: "../img/creatina4.jpg",
              descripcion:
                "Aminos BCAA de Nutrex. Importados. Masa muscular. Rendimiento. Previene fatiga.",
            },
            {
              id: 15,
              nombre: "Vaso Shakers",
              categoria: "Accesorio",
              precio: 25.99,
              marca: " Shark Design",
              imagen: "../img/creatina6.jpg",
              descripcion:
                "Vaso mezclador de Game of Thrones. Semi transparente. Con tapa a rosca y pico a presión.",
            },
          ];

          let carrito = [];
          const divisa = "$";
          const DOMitems = document.querySelector("#items");
          const DOMcarrito = document.querySelector("#carrito");
          const DOMtotal = document.querySelector("#total");
          const DOMbotonVaciar = document.querySelector("#boton-vaciar");
          const miLocalStorage = window.localStorage;

          function renderizarProductos() {
            baseDeDatos.forEach((info) => {
              const miNodo = document.createElement("div");
              miNodo.classList.add("card", "col-sm-4");
              const miNodoCardBody = document.createElement("div");
              miNodoCardBody.classList.add("card-body");
              const miNodoTitle = document.createElement("h5");
              miNodoTitle.classList.add("card-title");
              miNodoTitle.textContent = info.nombre;
              const miNodoImagen = document.createElement("img");
              miNodoImagen.classList.add("img-fluid");
              miNodoImagen.setAttribute("src", info.imagen);
              const miNodoPrecio = document.createElement("p");
              miNodoPrecio.classList.add("card-text");
              miNodoPrecio.textContent = `${info.precio}${divisa}`;
              const miNodoBoton = document.createElement("button");
              miNodoBoton.classList.add("btn", "btn-dark");
              miNodoBoton.textContent = "Agregar al carrito";
              miNodoBoton.setAttribute("marcador", info.id);
              miNodoBoton.addEventListener("click", anyadirProductoAlCarrito);
              miNodoCardBody.appendChild(miNodoImagen);
              miNodoCardBody.appendChild(miNodoTitle);
              miNodoCardBody.appendChild(miNodoPrecio);
              miNodoCardBody.appendChild(miNodoBoton);
              miNodo.appendChild(miNodoCardBody);
              DOMitems.appendChild(miNodo);
            });
          }

          function anyadirProductoAlCarrito(evento) {
            carrito.push(evento.target.getAttribute("marcador"));
            renderizarCarrito();
            guardarCarritoEnLocalStorage();
          }

          function renderizarCarrito() {
            DOMcarrito.textContent = "";

            const carritoSinDuplicados = [...new Set(carrito)];

            carritoSinDuplicados.forEach((item) => {
              const miItem = baseDeDatos.filter((itemBaseDatos) => {
                return itemBaseDatos.id === parseInt(item);
              });

              const numeroUnidadesItem = carrito.reduce((total, itemId) => {
                return itemId === item ? (total += 1) : total;
              }, 0);

              const miNodo = document.createElement("li");
              miNodo.classList.add("list-group-item", "text-right", "mx-2");
              miNodo.textContent = `${numeroUnidadesItem} x ${miItem[0].nombre} - ${miItem[0].precio}${divisa}`;

              const miBoton = document.createElement("button");
              miBoton.classList.add("btn", "btn-danger", "mx-1");
              miBoton.textContent = "X";
              miBoton.style.marginLeft = "1rem";
              miBoton.dataset.item = item;
              miBoton.addEventListener("click", borrarItemCarrito);

              miNodo.appendChild(miBoton);
              DOMcarrito.appendChild(miNodo);
            });

            DOMtotal.textContent = calcularTotal();
          }

          function borrarItemCarrito(evento) {
            const id = evento.target.dataset.item;

            carrito = carrito.filter((carritoId) => {
              return carritoId !== id;
            });

            renderizarCarrito();

            guardarCarritoEnLocalStorage();
          }

          function calcularTotal() {
            return carrito
              .reduce((total, item) => {
                const miItem = baseDeDatos.filter((itemBaseDatos) => {
                  return itemBaseDatos.id === parseInt(item);
                });

                return total + miItem[0].precio;
              }, 0)
              .toFixed(2);
          }

          function vaciarCarrito() {
            carrito = [];

            renderizarCarrito();

            localStorage.clear();
          }

          function guardarCarritoEnLocalStorage() {
            miLocalStorage.setItem("carrito", JSON.stringify(carrito));
          }

          function cargarCarritoDeLocalStorage() {

            if (miLocalStorage.getItem("carrito") !== null) {

              carrito = JSON.parse(miLocalStorage.getItem("carrito"));
            }
          }

          DOMbotonVaciar.addEventListener("click", vaciarCarrito);

          cargarCarritoDeLocalStorage();
          renderizarProductos();
          renderizarCarrito();
        });
      </script>
      <div class="container">
        <div class="row pb-4 pt-4">

          <main id="items" class="col-sm-8 row"></main>

          <aside class="col-sm-4">
            <h2>Carrito</h2>

            <ul id="carrito" class="list-group"></ul>
            <hr />

            <p class="text-right">Total: <span id="total"></span>$</p>
            <button id="boton-vaciar" class="btn btn-dark">Vaciar</button>
          </aside>
        </div>
      </div>
    </main>
    <footer>
      <div class="container-fluid">
        <div class="row p-5 text-white">
          <div class="col-md-12 col-lg-3">
            <div class="h3">
              <a class="text-white text-decoration-none" href="../index.html"
                ><img
                  src="../img/logo.png"
                  alt="logo"
                  width="80"
                  height="50"
                />Armory</a
              >
              <p class="text-secondary">Argentina-Entre Rios</p>
            </div>
          </div>
          <div class="col col-md-6 col-lg-3">
            <p class="h5 mb-3">Enlaces</p>
            <div class="mb-3">
              <a
                class="text-secondary text-decoration-none"
                href="../index.html"
                >Inicio</a
              >
            </div>
            <div class="mb-3">
              <a
                class="text-secondary text-decoration-none"
                href="../pages/producto.html"
                >Productos</a
              >
            </div>
            <div class="mb-3">
              <a
                class="text-secondary text-decoration-none"
                href="../pages/contacto.html"
                >Contacto</a
              >
            </div>
          </div>
          <div class="col col-md-6 col-lg-3">
            <p class="h5 mb-3">Links</p>
            <div class="mb-3">
              <a
                class="text-secondary text-decoration-none"
                href="https://www.instagram.com/?next="
                >Instagram</a
              >
            </div>
            <div class="mb-3">
              <a
                class="text-secondary text-decoration-none"
                href="https://www.facebook.com"
                >Facebook</a
              >
            </div>
            <div class="mb-3">
              <a
                class="text-secondary text-decoration-none"
                href="https://twitter.com/?lang=es"
                >Twitter</a
              >
            </div>
          </div>
          <div class="col col-md-6 col-lg-3">
            <p class="h5 mb-3">Sobre Nosotros</p>
            <p class="h6 text-secondary">
              Somos una pequeña tienda que se dedica exclusivamente a la venta
              de suplementos y equipo deportivo. <br />Numero de contacto <br />
              (+54(3765)858-15-05)
            </p>
          </div>
          <div class="container-fluid">
            <div class="row pt-3">
              <div class="col-12">
                <p class="text-secondary">© Copyright - 2023 - Armory -</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- scrips  -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/toastify-js"
    ></script>
    <script src="../main.js"></script>
    <!-- bootstrap -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <!-- scrips  -->
  </body>
</html>
